<!-- ドットインストール -->
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    .IOAPI__img {
      opacity: 0;
      /* まずは非表示に */
      transform: translateY(20px);
      /*下から表示したいので設定 */
      transition: opacity .7s, transform .3s
    }

    /* 画像が表示される時にはappearクラスが付くようにしてやる */
    .IOAPI__img.appear {
      opacity: 1;
      transform: translateY();
    }
  </style>
</head>

<body>
  <h1>動物紹介</h1>
  <P>
    こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。
  </P>
  <P>
    こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。
  </P>
  <P>
    こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。
  </P>
  <P>
    こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。
  </P>
  <img class="IOAPI__img" src="img/lion.png" style="width:200px" height="200px" alt="">
  <img class="IOAPI__img" src="img/panda.png" style="width:200px" height="200px" alt="">
  <P>
    こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。
  </P>
  <P>
    こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。
  </P>
  <P>
    こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。
  </P>
  <P>
    こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。
  </P>
  <P>
    こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。
  </P>
  <P>
    こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。こんにちは。
  </P>
  <img class="IOAPI__img" src="img/bear.png" style="width:200px" height="200px" alt="">


  <script>

    // img要素を取得してtargetに格納
    const targets = document.querySelectorAll('.IOAPI__img');

    // koroが呼ばれた証として、コンソールに出力する
    //　監視が始まった時と、デフォルトだとtargetがrootに０％交差したときに実行
    // 交差した時のtargetの情報はkoroの引数()で受け取れる。ここではcactusとしている。複数渡されることが多いので配列になる
    function koro(cactus, finishObservation) {
      console.log(cactus);


      cactus.forEach(cat => {
        // 下の書き方で、elseの部分を消して使う方法でもいいが、このやり方もある (isIntersectingがfalseのときは、早期returnしてやるという方法)
        //　cactus[0]のisIntersectingがfalseだったらそれ以降の処理はしないでね　という意味のreturn
        if (!cat.isIntersecting) {
          return;
        }
        //そのうえで、falseでなかったら appearクラスを付けたいので、このように書く
        cat.target.classList.add('appear');

        //ここで監視を止めて、ブラウザに負担をかけないようにするunobserve()メソッドを使う
        finishObservation.unobserve(cat.target);

      });
    }

    // isIntersecting はconsole内で確認できるもので、imgタグと交わるとtrueになり、この式でappearクラスがaddされて表示される
    // if (cactus[0].isIntersecting) {
    //   cactus[0].target.classList.add('appear');
    //   } 
    //   else {
    //     cactus[0].target.classList.remove('appear');
    //   }





    // milliの指定 (20%と80%の複数指定する場合は配列を使う)
    const milli = {
      // threshold: [0.2, 0.8],
      threshold: 0.2,
      // rootMargin: '0px 0px -100px',　rootの幅を自由に変えれる。（この場合はbottomが-100px）
    }

    //インスタンスを作ってやる。そして任意の％に指定したい場合は第二引数を入れて指定してやる
    const observer = new IntersectionObserver(koro, milli);




    // targetsに対してforEachをかけてやる。 targetsのそれぞれの要素をtargetととし、処理をかけてやる 
    targets.forEach(target => {
      // 上で定義したobserverにobserveメソッドを使ってtargetを監視してやる
      observer.observe(target);
    });









  </script>

</body>

</html>